<script setup>
import { reactive } from "vue";
import { findId } from "@/services/accountService";

const state = reactive({
  form: {
    email: "",
    phone: "",
  },
  data: {
    name: "",
    loginId: "",
  },
});

const submit = async () => {
  const res = await findId(state.form);
  state.data = res.data;
  //   try {
  //     const res = await findId(state.form);
  //     foundId.value = res.id || 'ì•„ì´ë””ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
  //   } catch (err) {
  //     console.error('ì•„ì´ë”” ì°¾ê¸° ì‹¤íŒ¨:', err);
  //     foundId.value = 'ì¡°íšŒ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
  //   }
};
</script>

<template>
  <h1>ì•„ì´ë”” ì°¾ê¸°</h1>
  <div class="findId">
    <div class="container">
      <form class="py-5 d-flex flex-column gap-3" @submit.prevent="submit">
        <div>
          ì´ë©”ì¼:
          <input
            type="email"
            class="form-control"
            v-model="state.form.email"
            placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."
            required
          />
        </div>
        <div>
          í•¸ë“œí°:
          <input
            type="text"
            class="form-control"
            v-model="state.form.phone"
            placeholder="'-'ë¥¼ ì œì™¸í•˜ê³  ì…ë ¥í•´ì£¼ì„¸ìš”."
            required
          />
        </div>
        <button class="w-100 h6 btn py-3 mt-3 btn-primary">ì¡°íšŒ</button>
      </form>
    </div>
  </div>
  <div class="showId mt-3" v-if="state.data">
    <p>
      ğŸ” ì°¾ì€ ì•„ì´ë””:
      <strong
        >ì´ë¦„:{{ state.data.userName }}, ì•„ì´ë””:
        {{ state.data.loginId }}</strong
      >
    </p>
  </div>
</template>

<style scoped>
/* ì˜ˆì‹œ ìŠ¤íƒ€ì¼ */
.findId {
  max-width: 400px;
  margin: auto;
}
h1 {
  display: flex;
  justify-content: center;
}
.showId {
  display: flex;
  justify-content: center;
}
</style>
